<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/main.css" rel="stylesheet">
</head>
<body>
<div class="row mg">
    <div class="contents">
        <div class="img_area">
            <a href="#">
                <img src="" class="bannerImg">
            </a>
        </div>
        <div class="arraw_area">
            <a href="#" class="prev">이전</a>
            <a href="#" class="next">다음</a>
        </div>
        <div class="circle_area">
            <ul class="container">
            </ul>
        </div>
    </div>
</div>
<script type="template/javascript" id="dotTemplate">
    <li class='dot'>
        <a href='#'></a>
    </li>
</script>
<script>
    let Slider = class {
        
        constructor() {
            this._index = 0;
            this._slider = document.querySelector('.bannerImg');
            this._imgList = [
                './img/@promotion01.jpg',
                './img/@promotion02.jpg',
                './img/@promotion03.jpg',
                './img/@promotion04.jpg',
                './img/@promotion05.jpg',
                './img/@promotion06.jpg'
            ];
            this._nextBtn = document.querySelector('.next');
            this._prevBtn = document.querySelector('.prev');
        }

        _excute(isNext) {
            this._offDot();
            this._updateIndex(isNext);
            this._updateImage();
            this._onDot();
        }

        _updateIndex(isNext) {
            if(isNext) {
                this._index = ++this._index === this._imgList.length ? 0 : this._index;
            }
            else {
                this._index = --this._index < 0 ? this._imgList.length - 1 : this._index;
            }
        }

        _updateImage() {
            this._slider.src = this._imgList[this._index];
        }

        _onDot() {
            this._dotList[this._index].classList.add('on');
        }

        _offDot() {
            this._dotList[this._index].classList.remove('on');
        }

        _renderDot() {
            let dotsStr = '';
            let dotTemplete = document.querySelector('#dotTemplate').text;
            for (let index = 0; index < this._imgList.length; index++) {
                dotsStr += dotTemplete;
            }
            document.querySelector('.container').innerHTML = dotsStr;
            this._dotList = document.querySelectorAll('.dot');
        }

        _bindEvent() {
            this._nextBtn.onclick = () => this._excute(true);
            this._prevBtn.onclick = () => this._excute(false);
        }

        _playAutoChange() {
            setInterval(() => this._excute(true), 3000);
        }

        init() {
            this._bindEvent();
            this._renderDot();
            this._onDot();
            this._updateImage();
            this._playAutoChange();
        }
    };
    
    let slider = new Slider();
    slider.init();
</script>
</body>
</html>