<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/main.css" rel="stylesheet">
</head>
<body>
<div class="row mg">
    <div class="contents">
        <div class="img_area">
            <a href="#">
                <img src="" class="bannerImg">
            </a>
        </div>
        <div class="arraw_area">
            <a href="#" class="prev">이전</a>
            <a href="#" class="next">다음</a>
        </div>
        <div class="circle_area">
            <ul class="container">
            </ul>
        </div>
    </div>
</div>
<script type="template/javascript" id="dotTemplate">
    <li class='dot'>
        <a href='#'></a>
    </li>
</script>
<script>

    (function() {
        let sldier = document.querySelector('.bannerImg');
        let nextClick = document.querySelector('.next');
        let prevClick = document.querySelector('.prev');
        let index = 0;
        let dotList;

        const sliderImgList = [
            './img/@promotion01.jpg',
            './img/@promotion02.jpg',
            './img/@promotion03.jpg',
            './img/@promotion04.jpg',
            './img/@promotion05.jpg',
            './img/@promotion06.jpg'
        ];

        const excute = (isNext) => {
            offDot();
            updateIndex(isNext);
            updateImage();
            onDot();
        };

        const updateImage = () => sldier.src = sliderImgList[index];

        const updateIndex = (isNext) => {
            if(isNext) {
                index = ++index === sliderImgList.length ? 0 : index;
            }
            else {
                index = --index < 0 ? sliderImgList.length-1 : index;
            }
        };

        const onDot = () => dotList[index].classList.add('on');
        
        const offDot = () => dotList[index].classList.remove('on');

        const renderDot = () => {
            let dotsStr = '';
            let dotTemplete = document.querySelector('#dotTemplate').text;
            for (let index = 0; index < sliderImgList.length; index++) {
                dotsStr += dotTemplete;
            }
            document.querySelector('.container').innerHTML = dotsStr;
            dotList = document.querySelectorAll('.dot');
        };
        const bindEvent = () => {
            prevClick.onclick = () => excute(false);
            nextClick.onclick = () => excute(true);
        };

        const init = function() {
            bindEvent();
            renderDot();
            onDot();
            updateImage();
            setInterval(() => excute(true), 3000);
         }();
    })();        
</script>
</body>
</html>